Создание пакетов JS и CSS
==========

В Yii есть возможность создания своих пакетов, содержащих JS и CSS файлы. При описании пакета можно указать зависимости от других пакетов.

Есть замечательный инструмент для рисования графиков на JS — [highcharts](http://www.highcharts.com/ "highcharts"), но он использует фреймворк jQuery и сам jQuery не подключает.

Рассмотрим пример использования пакета.

Создаём наш пакет, где указываем JS и CSS файлы из highcharts и прописываем зависимость от jQuery. В Yii jQuery является встроенным пакетом.

Настройка компонента в `protected/main.php`

~~~
[php]
'clientScript'=>array(
    'packages' => array(
       'highcharts' => array(
            'baseUrl' => '/js/highcharts/',
            'js'=>array(YII_DEBUG ? 'highcharts.src.js' : 'highcharts.js'),
            'css' => array('highcharts.css'),
            'depends'=>array('jquery'),
        ),
    )
)
~~~

Использование
-------------


Теперь вместо многострочного кода
~~~
[php]
Yii::app()->clientScript
  ->registerPackage('jquery')
  ->registerScriptFile('/js/highcharts/highcharts.js')
  ->registerCssFile('/js/highcharts/highcharts.css');

~~~

пишем лаконично
~~~
[php]
Yii::app()->clientScript
->registerPackage('highcharts');
~~~

Yii загрузит jQuery только один раз, даже если какой-то другой модуль, виджет или ваш код уже подключил jQuery


~~~
[php]
Yii::app()->clientScript
->registerPackage('jquery');

…

Yii::app()->clientScript
->registerPackage('highcharts');
~~~

---
  - `Автор`: Загиров Рустам, Stamm ([zagirov.name](http://zagirov.name/))